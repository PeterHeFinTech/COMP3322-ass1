<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="style.css">
    </head>        
    <body>
        <div class="container">
            <div class="title-mobile">
                <h1 class="title" id="title">COMP3230 Principles of Operating Systems</h1>
                <h2 class="subtitle">Programming Assignment One</h2>
            <div class="info_row">
                <div class="left-column">
                    <div class="due-date">Due date: Oct. 17, 2025, at 23:59</div>
                    <div class="version desktop-version"><b>(version: 1)</b></div>
                </div>
            </div>
            <div class="total-points">Total 15 points</div>
            </div>
            <div class="title-desktop">

                <h1 class="title" id="title">COMP3230 Principles of Operating Systems</h1>
                <h2 class="subtitle">Programming Assignment One</h2>
            <div class="info_row">
            <div class="left-column">
                <div class="total-points">Total 15 points</div>
                <div class="version desktop-version">(version: 1)</div>
            </div>
            <div class="due-date">Due date: Oct. 17, 2025, at 23:59</div>
            </div>
        </div>
        <div class="section1">
            <b>Programming Exercise - Yet Another Shell (yash) program</b>
        </div>
        <div class="sections" id="objectives">Objectives</div>
        <ol>
            <li>  <p>An assessment task related to ILO4 [Practicability] - "demonstrate knowledge in applying system software and tools available in a modern operating system for software development".</p></li>
            <li>  <p>A learning activity related to ILO 2a.</p></li>
            <li>  <p>The goals of this programming assignment are: </p>
                <ul>
                    <li><p>to have hands-on practice in designing and developing a shell program, which involves the creation, management, and coordination of multiple processes;</p></li>
                    <li><p>to learn how to use various important Unix system functions</p>
                        <ul>
                            <li>  <p>to perform process creation and program execution;</p></li>
                            <li>  <p>to support interaction between processes by using signals and pipes; and</p></li>
                            <li>  <p>to get the process's running statistics.</p></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ol>
        <div class="sections" id="task">Task</div>
        <p>Shell program, or commonly known as a command interpreter, is a program that acts as the user interface to the Operating System and allows the system to understand your commands.  For example, when you input the "ls -la" command, the shell executes the system utility program called ls for you.  Shell program can be used interactively or in batch processing.
        </p><p>You are going to implement a C program that acts as an interactive shell program, named 3230yash.  This program supports the following features (full details will be covered in the Specification section):</p>
        <ol>
            <li><p>The program (3230yash) accepts command from the user and executes the corresponding program with the given argument list.</p></li>
            <li><p>It can locate and execute any valid program (i.e. compiled programs) by specifying an absolute path (starting with /), a relative path (starting with ./), or by searching the directories listed in the $PATH environment variable.</p></li>
            <li><p>It has two built-in commands:</p>
            <ul>
                <li><p><b><i>exit</i></b> command that terminates the 3230yash program; once the program starts, it continuously accepts commands from the user until receiving the exit command.</p></li>
                <li><p><b><i>watch</i></b> command that monitors the resource usage of a running child process until it terminates.</p></li>
            </ul>
            </li>
            <li><p>It allows the use of | (pipe) operators to chain commands together.</p></li>
            <li><p>The 3230yash process should not be terminated by Cltr-c (SIGINT signal).</p></li>

        </ol>
        <div class="sections" id="specification">Specification</div>
        <p>The behavior of the 3230yash program:</p>
        <ul>
            <li><p>Like a traditional shell program, when the 3230yash process is ready to accept input, it displays a prompt and waits for input from the user:</p>
                <div class="code">## 3230yash >></div>
                <p>After accepting a line of input from the user, it parses the input line to construct the command name(s) and the associated argument list(s) and then creates the child process(es) to execute the command(s).  We can assume that the command line is limited to a maximum of 1024 characters and contains up to 30 strings, including the "|" symbol.</p></li>
            <li>
                <p>The 3230yash process should be able to locate and execute any program that can be found by </p>
                <ul>
                    <li><p>the absolute path specified in the command line, e.g.</p>
                        <div class="code">## 3230yash >>   /home/tmchan/a.out</div>
                    </li>
                    <li><p>the relative path specified in the command line, e.g.</p>
                    <div class="code">## 3230yash >>   ./a.out</div></li>
                    <li><p>searching the directories listed in the environment variable $PATH, e.g.</p>
                    <div class="code">## 3230yash >>   gcc hello.c</div>
                    <p>where gcc is in the directory /usr/bin, and<br>
                        <div class="long">$PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</div></p>
                    </li>
                </ul>
                <p>Please refer to pLab 1 to learn how to locate and execute a valid command or program.</p>
            </li>
            <li>
                <p>If the program cannot be located or executed, 3230yash displays an error message:</p>
                <div class="code">
## 3230yash >>   simp
3230yash: 'simp': No such file or directory
## 3230yash >>   /bin/simp
3230yash: '/bin/simp': No such file or directory
## 3230yash >>   ./start.sh
3230yash: './start.sh': Permission denied
                </div>
            </li>
            <li>
                <p>| symbol - if the | (pipe) symbols appear in between commands in each input line, 3230yash tries to create
                    multiple child processes and "connects" the standard output of the command before | (pipe) and links it to
                    the standard input of the command after | (pipe). That is, each command (except the first one) reads the
                    previous command's output. We can assume that the user will not enter more than 4 pipes (i.e., 5
                    commands) in an input command line. For example, when the user types:</p>
                <div class="code">
## 3230yash >>   cat TP-2526.html | grep table | wc -l
6
## 3230yash >>  
                </div>
                <p>We can assume that it is incorrect to have the | symbol as the first or last character on the input line. Also,
                    it is incorrect to allow two consecutive | symbols (e.g., '||', '| |') without a command in between.</p>
                <div class="code">
## 3230yash >> | wc -l
3230yash: Incorrect pipe sequence
## 3230yash >> cat abc.txt |
3230yash: Incorrect pipe sequence
## 3230yash >> cat hello.c | | wc -l
3230yash: should not have two consecutive | without in-between command
## 3230yash >>
                </div>
                <p>Please refer to pLab 2 to learn how to use pipe() and dup() system functions to set up a pipe between two processes.</p>
            </li>
            <li>
                <p>built-in command: <b><i>exit</i></b> - If the user enters the exit command, 3230yash should release all its resources
                    and then terminate, and the standard shell prompt reappears. For example, if the user types</p>
                <div class="code">
## 3230yash >> exit
3230yash: Terminated
root@ff860ab794d9:/home/tmchan/c3230# ps
PID TTY      STAT   TIME COMMAND
  1 pts/0    Ss     0:00 bash
 79 pts/0    R+     0:00 ps
root@ff860ab794d9:/home/tmchan/c3230#
                </div>
                <p>If the exit command has other arguments, 3230yash would not treat it as a valid exit request and would
                    not terminate. In addition, if the exit command does not appear as the first word in the command line,
                    3230yash would not treat it as the exit command.</p>
                    <div class="code">
## 3230yash >>  not exit
3230yash: 'not': No such file or directory
## 3230yash >>  exit now
3230yash: "exit" with other arguments!!!
## 3230yash >>
                    </div>
            </li>
            <li>
                <p>built-in command: <b><i>watch</i></b> - the user uses the watch command to periodically monitor the resource usage
                    of a running child process and report the data once the process terminates. However, since the watch
                    command can only manage a single command at a time, it cannot be used to monitor a sequence of piped
                    commands.
                </p>
                <div class="code">
## 3230yash >> watch ps f
PID TTY      STAT   TIME COMMAND
 20 pts/2    Ss     0:00 /bin/sh
 26 pts/2    S+     0:00  \_ bash
  9 pts/1    Ss     0:00 /bin/sh
 15 pts/1    S      0:00  \_ bash
 19 pts/1    S+     0:00      \_ ./yash
 48 pts/1    R+     0:00          \_ ps f
  1 pts/0    Ss+    0:00 bash
STATE CPUID UTIME STIME VSIZE     MINFLT MAJFLT
R     24    0.00  0.00  2748416   10     0
Z     24    0.00  0.00  0         370    0
## 3230yash >> watch ./add
STATE CPUID UTIME STIME VSIZE     MINFLT MAJFLT
R     18    0.00  0.00  2748416   10     0
R     18    0.49  0.00  2609152   61     2
R     18    0.99  0.00  2609152   61     2
Z     18    1.27  0.00  0         65     2
## 3230yash >> watch cat hello.c | wc -l
3230yash: Cannot watch a pipe sequence
## 3230yash >>
                </div>
                <p>
                    All status information managed by the Linux kernel of a process can be found in the /proc/{pid}/stat file. It
                    is a requirement of this assignment to make use of the /proc filesystem to extract the running statistics of a
                    process. Please refer to Programming pLab 1 to learn how to retrieve those process statistics from the
                    proc filesystem. In addition, you can find more detailed description of the /proc/{pid}/stat file at
                    <a href="https://man7.org/linux/man-pages/man5/proc_pid_stat.5.html">https://man7.org/linux/man-pages/man5/proc_pid_stat.5.html</a>.
                </p>
                <p>Here is a summary of the information in the output.</p>
                <table border="0" cellspacing="0" cellpadding="5">
                <tr>
                    <th>STATE</th>
                    <td>Indicating the process current state: Running, Sleeping, Zombie, . . .</td>
                </tr>
                <tr>
                    <th>CPUID</th>
                    <td>CPU number the process last executed on</td>
                </tr>
                <tr>
                    <th>UTIME</th>
                    <td>The amount of time (in seconds) the process was in user mode</td>
                </tr>
                <tr>
                    <th>STIME</th>
                    <td>The amount of time (in seconds) the process was in kernel mode</td>
                </tr>
                <tr>
                    <th>VSIZE</th>
                    <td>Virtual memory size usage of the process in bytes</td>
                </tr>
                <tr>
                    <th>MINFLT</th>
                    <td>The number of minor faults the process has made which have not required loading a memory page from disk</td>
                </tr>
                <tr>
                    <th>MAJFLT</th>
                    <td>The number of major faults the process has made which have required loading a memory page from disk</td>
                </tr>
                </table>  
                <p>The 3230yash process adopts the following mechanism to monitor the target child process.</p>
                <ul>
                    <li><p>Before the child process begins executing the target command, 3230yash captures an initial snapshot of the child's resource usage. After this, the child process starts executing the command.</p></li>
                    <li><p>Every 500 milliseconds, 3230yash takes a new snapshot of the child process's resource usage and continues doing so at these intervals until the child process terminates.</p></li>
                    <li><p>Once the child process has finished and produced its output, 3230yash displays all the collected resource usage information for the terminated child process.</p></li>
                </ul>
                <p>Please refer to pLab 1 to learn how to use the non-blocking mode of the waitpid()/waitid() system calls.</p>
            </li>
            <li>
                <p>The 3230yash process and its child processes are required to respond to the SIGINT signal (generated by pressing Ctrl-c or kill command) according to the following guideline:</p>
                <p>The child process should respond to the SIGINT signal according to the program's predefined behavior; therefore, some child processes may terminate, while others may not.</p>
                <div class="code">
## 3230yash >>  ./forever<br>
^CReceives SIGINT!! IGNORE IT :)
^CReceives SIGINT!! IGNORE IT :)
^CReceives SIGINT!! IGNORE IT :)
^CReceives SIGINT!! IGNORE IT :)
forever:  Killed
## 3230yash >>

## 3230yash >>  ./loopf 10
^Cloopf:  Interrupt
## 3230yash >>   
                </div>
                <p>If a process is terminated by a signal, 3230yash should display the type of signal that caused the program to terminate together with the program's name, e.g., if detects SIGINT, prints "Interrupt"; if detects SIGKILL, prints "Killed". Please refer to pLab 2 to learn how to handle signals and display appropriate messages.</p>
                <p>The 3230yash process should not be terminated by SIGINT. When the user presses Ctrl-c while the 3230yash process is waiting for input, 3230yash should react with a new prompt:</p>
                <div class="code">
## 3230yash >>  ^C
## 3230yash >>  ^C
## 3230yash >>  ^C
## 3230yash >>  
                </div>
            </li>
        </ul>
        <div class="sections" id="documentation">Documentation</div>
        <ol>
            <li><p>At the head of the submitted source code, clearly state the:</p><ul>
                <li><p>Student name and No.:</p></li>
                <li><p>Development platform:</p></li>
                <li><p>Remark - describe how much you have completed (See Grading Criteria)</p></li>
            </ul></li>
            <li><p>Inline comments (try to be detailed so that your code could be understood by others easily)</p></li>
        </ol>
        <div class="sections" id="computer-platform">Computer platform to use</div>
        <p>For this assignment, you can develop and test your program on any Linux platform, but you must make sure that the program can correctly execute on the workbench2 Linux server (as the tutors will use this platform to do the grading). Your program must be written in C and successfully compiled with gcc on the server. It would be nice if you develop and test your program on your own machine (WSL2 or Ubuntu docker). After fully tested locally, upload the program to workbench2 for the final tests.</p>
        <p>It's worth noticing that the only server for COMP3230 is workbench2.cs.hku.hk, and please do not use any CS department server, especially academy11 and academy21, as they are reserved for other courses. As the department and university have tightened the security control, all users must first connect to HKU network via HKUVPN before they can access CS department's servers. In case you cannot login to workbench2, please contact tutor(s) for help.</p>
        <div class="sections" id="submission">
            Submission
        </div>
        <p>Submit your program to the Programming # One submission page at the course's Moodle website. Name your program with this format: 3230yash_{UID}.c (replace {UID} with your HKU student number). As the Moodle site may not accept source code submission, please compress your program to the zip or tgz format before uploading.</p>
        <div class="sections" id="grading">Grading Criteria</div>
        <ol>
            <li><p>Your submission will be primarily tested under workbench2. Make sure that your program can be compiled without any errors. Otherwise, we have no way to test your submission, and you will get a zero mark. </p></li>
            <li><p>As the tutor will check your source code, please write your program with good readability (i.e., with good code convention and sufficient comments) so that you will not lose marks due to possible confusion.</p></li>
            <table class="grading-table-desktop" border="1" cellspacing="0" cellpadding="5" class="grading-table">
                <tr>
                    <td><b>Documentation (-1 point)</b></td>
                    <td colspan="2">
                        <ul>
                            <li><p>Include necessary comments to clearly indicate the logic of the program</p></li>
                            <li><p>Include required student's info at the beginning of the program</p></li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td rowspan="5"><b>Correctness of the program (15 points)</b></td>
                        <td><b>
                            Process creation and execution (4.5 points)
                        </b></td>
                        <td>
                            <ul>
                                <li><p>Should be able to print "## 3230yash >>  " and accept user's input</p></li>
                                <li><p>Should be able to use a new process to execute the input command</p></li>
                                <li><p>Can locate and execute a command with a full path, with a relative path, or under the standard PATH</p></li>
                                <li><p>Can execute a command with any number of arguments</p></li>
                                <li><p>Can handle error situations correctly, e.g., incorrect filename, incorrect path, not a binary file, etc.</p></li>
                                <li><p>Should wait for child process to complete before accepting next request</p></li>
                                <li><p>Should report which signal that terminates the child process</p></li>
                                <li><p>Allow user to execute multiple commands (with arguments) one after the other</p></li>
                                <li><p>Should remove all zombie processes</p></li>
                            </ul>
                        </td>
                </tr>
                <tr>
                    <td><b>Process creation and execution - use of '|' (4 points)</b></td>
                    <td>
                        <ul>
                            <li><p>Correct use of | symbol; can report improper use of pipes</p></li>
                            <li><p>Can execute two commands which are connected by a pipe</p></li>
                            <li><p>Can execute two commands with any number of arguments and are connected by a pipe</p></li>
                            <li><p>Can execute at most 5 commands with any number of arguments and are connected by a sequence of pipes</p></li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><b>SIGINT signals (2 points)</b></td>
                    <td><ul>
                        <li><p>The 3230yash process should respond correctly with the SIGINT signal</p></li>
                        <li><p>Child processes may be terminated by SIGINT signal</p></li>
                    </ul></td>
                </tr>
                <tr>
                    <td><b>Built-in command: watch (4 points)</b></td>
                    <td><ul>
                        <li><p>Correct use of the watch command; can report improper usage</p></li>
                        <li><p>Should be able to report the process info before executing the user input command</p></li>
                        <li><p>Should report the process info periodically during its execution</p></li>
                        <li><p>Should report the process info after completion of the process</p></li>
                        <li><p>Should display the information after the child process terminated</p></li>
                    </ul></td>
                </tr>
                <tr>
                    <td><b>Built-in command: exit (0.5 points)</b></td>
                    <td>
                        <ul>
                            <li><p>Correct use of the exit command; can report improper usage</p></li>
                        </ul>
                    </td>
                </tr>
            </table>
            <table class="grading-table-mobile" border="1" cellspacing="0" cellpadding="5">
    <tr>
        <td class="doc-cell"><strong>Documentation (-1 point)</strong></td>
        <td class="doc-cell">
            <ul>
                <li>Include necessary comments to clearly indicate the logic of the program</li>
                <li>Include required student's info at the beginning of the program</li>
            </ul>
        </td>
    </tr>

    <tr>
        <td colspan="2" class="correctness-header">Correctness of the program (15 points)</td>
    </tr>

    <tr>
        <td class="correctness-left"><b>Process creation and execution (4.5 points)</b></td>
        <td class="correctness-right">
            <ul>
                <li>Should be able to print "## 3230yash >>  " and accept user's input</li>
                <li>Should be able to use a new process to execute the input command</li>
                <li>Can locate and execute a command with a full path, with a relative path, or under the standard PATH</li>
                <li>Can execute a command with any number of arguments</li>
                <li>Can handle error situations correctly, e.g., incorrect filename, incorrect path, not a binary file, etc.</li>
                <li>Should wait for child process to complete before accepting next request</li>
                <li>Should report which signal that terminates the child process</li>
                <li>Allow user to execute multiple commands (with arguments) one after the other</li>
                <li>Should remove all zombie processes</li>
            </ul>
        </td>
    </tr>

    <tr>
        <td class="correctness-left"><b>creation and execution - use of '|' (4 points)</b></td>
        <td class="correctness-right">
            <ul>
                <li>Correct use of | symbol; can report improper use of pipes</li>
                <li>Can execute two commands which are connected by a pipe</li>
                <li>Can execute two commands with any number of arguments and are connected by a pipe</li>
                <li>Can execute at most 5 commands with any number of arguments and are connected by a sequence of pipes</li>
            </ul>
        </td>
    </tr>

    <tr>
        <td class="correctness-left"><b>SIGINT signals (2 points)</b></td>
        <td class="correctness-right">
            <ul>
                <li>The 3230yash process should respond correctly with the SIGINT signal</li>
                <li>Child processes may be terminated by SIGINT signal</li>
            </ul>
        </td>
    </tr>

    <tr>
        <td class="correctness-left"><b>Built-in command: watch (4 points)</b></td>
        <td class="correctness-right">
            <ul>
                <li>Correct use of the watch command; can report improper usage</li>
                <li>Should be able to report the process info before executing the user input command</li>
                <li>Should report the process info periodically during its execution</li>
                <li>Should report the process info after completion of the process</li>
                <li>Should display the information after the child process terminated</li>
            </ul>
        </td>
    </tr>

    <tr>
        <td class="correctness-left"><b>Built-in command: exit (0.5 points)</b></td>
        <td class="correctness-right">
            <ul>
                <li>Correct use of the exit command; can report improper usage</li>
            </ul>
        </td>
    </tr>
</table>

        </ol>
        <div class="sections" id="plagiarism">Plagiarism </div>
        <p>Plagiarism is a very serious offense. Students should understand what constitutes plagiarism, the consequences of committing an offense of plagiarism, and how to avoid it. Please note that we may request you to explain to us how your program functions as well as we may also make use of software tools to detect software plagiarism.</p>
        <div class="sections" id="using-genai">Using GenAI</div>
        <p>You are allowed to use Generative AI to assist you to complete the assignment. If you are using GenAI, you SHOULD include a report to clearly state the use of GenAI, including:</p>
        <ul>
            <li><p>The GenAI models you used</p></li>
            <li><p>The prompts/questions you had with the GenAI and the responses. If you have adopted those code snippets, you SHOULD clearly indicate to us.</p></li>
        </ul>
        <p>Should we suspect plagiarism in your submission, it would be unacceptable to justify this by stating you used GenAI for coding guidance and its output merely mirrors that of other students. While GenAI can be a valuable tool for exploring different techniques, we often need to apply adjustments to the provided code snippet to tailor it to our specific tasks.</p>
        <nav class="mobile-nav">
            <a href="#title">Top</a>
            <a href="#objectives">Objectives</a>
            <a href="#task">Task</a>
            <a href="#specification">Specification</a>
            <a href="#documentation">Documentation</a>
            <a href="#computer-platform">Platform</a>
            <a href="#submission">Submission</a>
            <a href="#grading">Grading</a>
            <a href="#plagiarism">Plagiarism</a>
            <a href="#using-genai">Using GenAI</a>
        </nav>
    </div>
    </body>
    
</html>